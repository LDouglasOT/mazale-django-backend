name: Deploy to Production

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Webhook with Signature
        uses: distributhor/workflow-webhook@v3
        with:
          webhook_url: "https://sugarmummiesug.online/api/deploy-webhook-secret-abc123/"
          # Match the name you created in GitHub Secrets exactly
          webhook_secret: ${{ secrets.MazalePayload }}
          # This JSON must be exactly what the Django view signs
          data: '{"status": "deploying"}'